<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>S'inscrire — Rail Invest</title>

<!-- Bootstrap (optionnel mais utile) -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Font Awesome pour petites icônes -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
  :root{
    --orange-100: #fff4eb;
    --orange-200: #fff0df;
    --accent: #ff9a2e;
    --accent-dark: #ff7f00;
    --muted: #6b6b6b;
    --card-bg: #ffffff;
    --page-bg: #fff7f0;
  }

  html,body{
    height:100%;
    margin:0;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg, rgba(255,244,235,0.6), rgba(255,245,238,0.9));
    -webkit-font-smoothing:antialiased;
  }

  /* PAGE LAYOUT */
  .page {
    min-height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
  }

  /* HEADER IMAGE (floutée) */
  .hero {
    width:100%;
    height:200px;
    max-height:260px;
    position:relative;
    overflow:hidden;
    display:flex;
    align-items:flex-start;
    justify-content:center;
  }

  .hero .hero-img {
    position:absolute;
    inset:0;
    background-image:url('3.jpg'); /* <--- remplace par ton image */
    background-size:cover;
    background-position:center;
    filter: blur(6px) brightness(0.85);
    transform: scale(1.05);
    opacity:0.95;
    z-index:0;
  }

  /* subtle orange gradient overlay so image is barely visible */
  .hero::after{
    content:"";
    position:absolute;
    inset:0;
    background: linear-gradient(180deg, rgba(255,160,60,0.06), rgba(255,160,60,0.04));
    z-index:1;
    pointer-events:none;
  }

  /* header top-right: language selector */
  .lang-select {
    position:absolute;
    top:12px;
    right:18px;
    z-index:2;
    display:flex;
    gap:8px;
    align-items:center;
  }
  .lang-select .btn-lang {
    background: rgba(255,255,255,0.85);
    border:1px solid rgba(0,0,0,0.06);
    padding:6px 8px;
    border-radius:6px;
    font-size:13px;
    cursor:pointer;
    display:flex;
    gap:6px;
    align-items:center;
  }
  .lang-select .btn-lang .caret {
    margin-left:6px;
    font-size:11px;
  }

  /* FORM CARD */
  .form-wrap {
    width:94%;
    max-width:920px;
    margin-top:-40px; /* pulled up over hero a bit */
    background: var(--card-bg);
    border-radius:14px;
    box-shadow: 0 12px 30px rgba(6,10,30,0.08);
    padding:22px;
    z-index:3;
    position:relative;
    transition: transform .35s ease, box-shadow .35s ease;
  }
  .form-wrap:hover { transform: translateY(-4px); box-shadow:0 16px 40px rgba(6,10,30,0.12) }

  .form-head {
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    margin-bottom:10px;
  }

  .form-title {
    display:flex;
    gap:12px;
    align-items:center;
  }
  .form-title h1{
    margin:0;
    font-size:20px;
    letter-spacing:0.2px;
    color:#111;
  }
  .form-title p {
    margin:0;
    color:var(--muted);
    font-size:13px;
  }

  /* Toggle row for locale/exterieur */
  .toggle-row {
    display:flex;
    gap:8px;
    justify-content:center;
    margin:12px 0 18px;
  }
  .toggle-btn {
    flex: 0 0 45%;
    max-width:45%;
    text-align:center;
    padding:10px;
    border-radius:10px;
    border:1px solid rgba(0,0,0,0.06);
    cursor:pointer;
    font-weight:600;
    background: linear-gradient(180deg, #fff, #fbfbfb);
    transition: all .22s ease;
  }
  .toggle-btn.active {
    background: linear-gradient(180deg, var(--accent), var(--accent-dark));
    color:white;
    box-shadow: 0 6px 18px rgba(255,126,0,0.18);
    border: none;
  }

  /* FORM GRID */
  .reg-form {
    display:grid;
    grid-template-columns: repeat(12, 1fr);
    gap:12px;
  }

  .col-6 { grid-column: span 6; }
  .col-12 { grid-column: span 12; }

  label { font-size:13px; color:#333; font-weight:600; display:block; margin-bottom:6px; }
  input[type="text"], input[type="tel"], input[type="password"], select, input[type="date"] {
    width:100%;
    padding:10px 12px;
    border-radius:8px;
    border:1px solid rgba(20,20,20,0.06);
    background: #fff;
    outline:none;
    transition: box-shadow .15s ease, border-color .15s ease;
    box-shadow: 0 1px 0 rgba(0,0,0,0.02) inset;
  }
  input:focus, select:focus {
    box-shadow: 0 6px 18px rgba(255,160,60,0.12);
    border-color: var(--accent);
  }

  .prefix {
    display:flex;
    gap:8px;
    align-items:center;
  }
  .prefix .flag {
    font-size:20px;
    margin-right:6px;
  }
  .small-note { font-size:12px; color:var(--muted); margin-top:6px; }

  /* Champ "Autre" caché par défaut */
  .other-country { display:none; }

  /* submit */
  .btn-submit {
    width:100%;
    padding:12px 18px;
    border-radius:12px;
    border:none;
    font-weight:700;
    color:white;
    background: linear-gradient(90deg, #ff9a2e, #ff7f00);
    box-shadow: 0 8px 24px rgba(255,127,0,0.25);
    cursor:pointer;
    transition: transform .14s ease, box-shadow .18s ease;
    letter-spacing:0.3px;
  }
  .btn-submit:hover { transform: translateY(-3px); box-shadow: 0 12px 32px rgba(255,127,0,0.3); }

  /* helper text error */
  .error {
    color:#c0392b;
    font-size:13px;
    margin-top:6px;
  }

  /* responsive behaviour: stack columns on small screens */
  @media (max-width:900px) {
    .col-6 { grid-column: span 12; }
    .toggle-btn { flex-basis: 48%; max-width:48%;}
    .hero { height:170px; }
    .form-wrap { margin-top:-30px; padding:16px; border-radius:12px; }
  }

  @media (max-width:420px) {
    .lang-select { right:10px; top:8px; }
    .hero { height:140px; }
    .form-wrap { padding:14px; width:96%; }
  }
</style>
</head>
<body>
<div class="page">

  <!-- HERO IMAGE (floutée) -->
  <div class="hero" role="img" aria-label="Image de fond">
    <div class="hero-img" aria-hidden="true"></div>

    <!-- Language selector top-right -->
    <div class="lang-select" role="navigation" aria-label="Sélecteur de langue">
      <div class="btn-lang" id="langBtn">
        <span id="langLabel">FR</span>
        <i class="fa fa-caret-down caret"></i>
      </div>
      <!-- small dropdown -->
      <div id="langMenu" style="position:absolute; right:18px; top:44px; display:none; z-index:20;">
        <div style="background:white; border-radius:8px; padding:6px 8px; box-shadow:0 8px 18px rgba(0,0,0,0.08);">
          <div class="lang-option" data-lang="fr" style="padding:6px; cursor:pointer;">🇫🇷 Français</div>
          <div class="lang-option" data-lang="en" style="padding:6px; cursor:pointer;">🇬🇧 English</div>
          <div class="lang-option" data-lang="ar" style="padding:6px; cursor:pointer;">🇸🇦 العربية</div>
        </div>
      </div>
    </div>
  </div>

  <!-- FORM WRAPPER -->
  <div class="form-wrap" aria-live="polite">
    <div class="form-head">
      <div class="form-title">
        <svg width="38" height="38" viewBox="0 0 24 24" fill="none" style="border-radius:8px; background:linear-gradient(45deg,#fff,#fff); padding:6px;">
          <path d="M3 6h18M3 12h18M3 18h18" stroke="#ff7f00" stroke-width="1.6" stroke-linecap="round"/>
        </svg>
        <div>
          <h1>Créer un compte Rail Invest</h1>
          <p>Inscris-toi pour participer aux projets d’infrastructure et d’énergie durable.</p>
        </div>
      </div>

      <div style="text-align:right;">
        <small style="color:var(--muted)">Déjà membre ? <a href="login.html">Connecte-toi</a></small>
      </div>
    </div>

    <!-- Toggle locale/exterieur -->
    <div class="toggle-row">
      <div id="btnLocale" class="toggle-btn active" role="button" aria-pressed="true">Locale</div>
      <div id="btnExterieur" class="toggle-btn" role="button" aria-pressed="false">Extérieur</div>
    </div>

    <!-- Registration form -->
    <form id="regForm" class="reg-form" novalidate>
      <!-- Country selector + phone prefix -->
      <div class="col-6">
        <label for="country">Pays</label>
        <div style="display:flex; gap:8px;">
          <select id="country" required>
            <!-- options populated by JS -->
          </select>
        </div>
        <div class="small-note">Si ton pays n'est pas listé, choisis "Autre" et saisis le pays manuellement.</div>
      </div>

      <div class="col-6">
        <label for="phone">Téléphone</label>
        <div class="prefix">
          <span class="flag" id="phoneFlag">🇸🇦</span>
          <input id="phonePrefix" type="text" readonly style="width:96px; text-align:center; margin-right:6px; background:#f9f9f9;">
          <input id="phone" type="tel" placeholder="Numéro sans espace" required>
        </div>
        <div class="error" id="phoneError" style="display:none"></div>
      </div>

      <div class="col-6">
        <label for="firstname">Prénom</label>
        <input id="firstname" type="text" placeholder="Ton prénom" required>
      </div>

      <div class="col-6">
        <label for="lastname">Nom</label>
        <input id="lastname" type="text" placeholder="Ton nom" required>
      </div>

      <div class="col-6">
        <label for="birth">Date de naissance</label>
        <input id="birth" type="date" required>
      </div>

      <div class="col-6">
        <label for="ref">Code parrainage (facultatif)</label>
        <input id="ref" type="text" placeholder="Code parrainage">
      </div>

      <div class="col-6">
        <label for="password">Mot de passe</label>
        <input id="password" type="password" placeholder="8+ caractères" minlength="8" required>
      </div>

      <div class="col-6">
        <label for="confirm">Confirmer mot de passe</label>
        <input id="confirm" type="password" placeholder="Retape le mot de passe" minlength="8" required>
        <div class="error" id="pwError" style="display:none"></div>
      </div>

      <!-- Other country free text (hidden by default) -->
      <div class="col-12 other-country" id="otherCountryWrap">
        <label for="otherCountry">Autre pays (si non listé)</label>
        <input id="otherCountry" type="text" placeholder="Saisir le nom du pays">
      </div>

      <!-- Submit -->
      <div class="col-12" style="margin-top:6px;">
        <button type="submit" class="btn-submit">S'inscrire</button>
        <div class="small-note" style="margin-top:8px;">En cliquant sur s'inscrire, vous acceptez nos <a href="#" style="color:var(--accent)">conditions</a>.</div>
      </div>
    </form>
  </div>

</div>

<!-- JS: bootstrap optional, then our interaction JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
/* ========= Données pays + préfixes + flags =========
   6 pays Afrique + 5 autres (incl. Arabie Saoudite)
*/
const COUNTRIES = [
  { code: "CM", name: "Cameroun", prefix: "+237", flag: "🇨🇲", group: "afrique" },
  { code: "NG", name: "Nigeria", prefix: "+234", flag: "🇳🇬", group: "afrique" },
  { code: "KE", name: "Kenya", prefix: "+254", flag: "🇰🇪", group: "afrique" },
  { code: "ZA", name: "South Africa", prefix: "+27", flag: "🇿🇦", group: "afrique" },
  { code: "GH", name: "Ghana", prefix: "+233", flag: "🇬🇭", group: "afrique" },
  { code: "EG", name: "Egypt", prefix: "+20", flag: "🇪🇬", group: "afrique" },

  { code: "FR", name: "France", prefix: "+33", flag: "🇫🇷", group: "other" },
  { code: "GB", name: "United Kingdom", prefix: "+44", flag: "🇬🇧", group: "other" },
  { code: "US", name: "United States", prefix: "+1", flag: "🇺🇸", group: "other" },
  { code: "SA", name: "Arabie Saoudite", prefix: "+966", flag: "🇸🇦", group: "other" },
  { code: "DE", name: "Germany", prefix: "+49", flag: "🇩🇪", group: "other" },

  // special "Other" option for manual entry
  { code: "OT", name: "Autre", prefix: "", flag: "🏳️", group: "other" }
];

/* ---------- Helpers ---------- */
function $(sel) { return document.querySelector(sel); }
function $all(sel) { return Array.from(document.querySelectorAll(sel)); }

/* ---------- Populate country select ---------- */
const countrySelect = $("#country");
function buildCountryOptions(showGroup) {
  // clear
  countrySelect.innerHTML = "";
  // group labelled optgroups: Afrique first then Autres
  const optAf = document.createElement("optgroup");
  optAf.label = "Afrique";
  COUNTRIES.filter(c => c.group === "afrique").forEach(c => {
    const o = document.createElement("option");
    o.value = c.code;
    o.textContent = `${c.flag} ${c.name} (${c.prefix})`;
    countrySelect.appendChild(o);
  });

  const optOther = document.createElement("optgroup");
  optOther.label = "Autres";
  COUNTRIES.filter(c => c.group === "other").forEach(c => {
    const o = document.createElement("option");
    o.value = c.code;
    o.textContent = `${c.flag} ${c.name}${c.prefix ? ' ('+c.prefix+')' : ''}`;
    countrySelect.appendChild(o);
  });

  // set default based on current mode handled elsewhere
}

/* ---------- UI references ---------- */
const btnLocale = $("#btnLocale");
const btnExterieur = $("#btnExterieur");
const phonePrefix = $("#phonePrefix");
const phoneFlag = $("#phoneFlag");
const phoneInput = $("#phone");
const otherCountryWrap = $("#otherCountryWrap");
const otherCountryInput = $("#otherCountry");
const regForm = $("#regForm");
const pwError = $("#pwError");
const phoneError = $("#phoneError");
const langBtn = $("#langBtn");
const langMenu = $("#langMenu");
const langLabel = $("#langLabel");

/* ---------- Init ---------- */
buildCountryOptions();

// default mode: Locale active -> set country to Saudi Arabia as requested
let mode = "locale"; // locale | exterieur
function setMode(m) {
  mode = m;
  if (m === "locale") {
    btnLocale.classList.add("active");
    btnExterieur.classList.remove("active");
    // set country to SA (Arabie Saoudite)
    countrySelect.value = "SA";
    otherCountryWrap.style.display = "none";
    updatePrefixByCountry("SA");
  } else {
    btnLocale.classList.remove("active");
    btnExterieur.classList.add("active");
    // placeholder: let user choose
    countrySelect.value = "";
    otherCountryWrap.style.display = "none";
    // show placeholder by adding a disabled option
    const placeholder = document.createElement("option");
    placeholder.value = "";
    placeholder.textContent = "Choisis votre pays...";
    placeholder.disabled = true;
    placeholder.selected = true;
    countrySelect.prepend(placeholder);
    phonePrefix.value = "";
    phoneFlag.textContent = "🏳️";
  }
}

/* ---------- update prefix/flag when country changes ---------- */
function updatePrefixByCountry(code) {
  const found = COUNTRIES.find(c => c.code === code);
  if (!found) {
    phonePrefix.value = "";
    phoneFlag.textContent = "🏳️";
    return;
  }
  phonePrefix.value = found.prefix || "";
  phoneFlag.textContent = found.flag || "🏳️";
}

/* On country change */
countrySelect.addEventListener("change", function () {
  const val = this.value;
  if (val === "OT") {
    otherCountryWrap.style.display = "block";
    phonePrefix.value = "";
    phoneFlag.textContent = "🏳️";
  } else {
    otherCountryWrap.style.display = "none";
    updatePrefixByCountry(val);
  }
});

/* Buttons toggle */
btnLocale.addEventListener("click", function () {
  setMode("locale");
});
btnExterieur.addEventListener("click", function () {
  setMode("exterieur");
});

/* Form validation */
function validatePhone() {
  const v = phoneInput.value.trim();
  if (v.length < 6) {
    phoneError.style.display = "block";
    phoneError.textContent = "Numéro trop court.";
    return false;
  }
  phoneError.style.display = "none";
  return true;
}

function validatePasswords() {
  const p = $("#password").value;
  const q = $("#confirm").value;
  if (p.length < 8) {
    pwError.style.display = "block";
    pwError.textContent = "Le mot de passe doit contenir au moins 8 caractères.";
    return false;
  }
  if (p !== q) {
    pwError.style.display = "block";
    pwError.textContent = "Les mots de passe ne correspondent pas.";
    return false;
  }
  pwError.style.display = "none";
  return true;
}

/* Form submit handler (demo) */
regForm.addEventListener("submit", function (e) {
  e.preventDefault();

  // basic checks
  let ok = true;
  // required fields
  ["firstname","lastname","birth","password","confirm"].forEach(id => {
    const el = $("#"+id);
    if (!el.value.trim()) {
      ok = false;
      // you could add per-field errors; keeping simple
    }
  });

  if (!validatePhone()) ok = false;
  if (!validatePasswords()) ok = false;

  // country check: if exterieur and no country chosen -> invalid
  if (mode === "exterieur") {
    if (!countrySelect.value) {
      alert("Veuillez choisir votre pays.");
      ok = false;
    }
  }

  if (!ok) return;

  // prepare payload (here we only simulate)
  const payload = {
    country: countrySelect.value === "OT" ? otherCountryInput.value.trim() : countrySelect.value,
    phone: (phonePrefix.value||"") + " " + phoneInput.value.trim(),
    firstname: $("#firstname").value.trim(),
    lastname: $("#lastname").value.trim(),
    birth: $("#birth").value,
    ref: $("#ref").value.trim()
  };

  // show success toast (simple)
  const successBox = document.createElement("div");
  successBox.style.position = "fixed";
  successBox.style.right = "20px";
  successBox.style.top = "20px";
  successBox.style.background = "#0f9d58";
  successBox.style.color = "white";
  successBox.style.padding = "12px 16px";
  successBox.style.borderRadius = "8px";
  successBox.style.boxShadow = "0 8px 24px rgba(0,0,0,0.12)";
  successBox.textContent = "Inscription simulée — formulaire valide. (Demo only)";
  document.body.appendChild(successBox);
  setTimeout(()=> successBox.remove(), 4000);

  // Reset form (for demo)
  // regForm.reset();
});

/* Phone input: ensure numericish */
phoneInput.addEventListener("input", function () {
  // remove spaces
  this.value = this.value.replace(/\s+/g,'').replace(/[^\d+]/g,'');
});

/* Language menu toggle */
langBtn.addEventListener("click", function(e){
  e.stopPropagation();
  langMenu.style.display = langMenu.style.display === "block" ? "none" : "block";
});
document.addEventListener("click", function(){
  langMenu.style.display = "none";
});
document.querySelectorAll(".lang-option").forEach(opt => {
  opt.addEventListener("click", function(){
    const lang = this.dataset.lang;
    langLabel.textContent = lang.toUpperCase();
    langMenu.style.display = "none";
    // TODO: hook language switching (you have translations)
  });
});

/* init page */
setMode("locale");
</script>

</body>
</html>